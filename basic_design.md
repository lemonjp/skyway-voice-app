# WebRTC音声通話アプリケーション 基本設計書

## 1. プロジェクト概要
SkyWayを利用したシンプルなWebRTC音声通話アプリケーションを開発する。

## 2. 技術スタック
- フレームワーク: Next.js
- 言語: TypeScript
- スタイリング: Tailwind CSS
- WebRTC: SkyWay
- データ管理: JSONモック（将来的にデータベース化を考慮）

## 3. 機能要件

### 3.1 認証機能
- 固定ユーザー（John, Paul）によるシンプルな認証
  - ユーザー名とパスワードによるログイン
  - パスワードは各ユーザー名と同じ文字列
  - 不正なユーザー名の場合はエラーメッセージを表示
  - JSONモックでユーザー情報を管理

### 3.2 通話機能
- SkyWayを使用したP2P音声通話
  - ログイン後自動的にSkyWayに接続
  - 相手のオンライン状態をリアルタイムで表示
  - マイクのON/OFF切り替え機能
  - 双方向の音声通話機能

### 3.3 UI/UX要件
- ログイン画面
  - ユーザー名入力フィールド
  - パスワード入力フィールド
  - ログインボタン
  - エラーメッセージ表示領域

- メイン画面
  - ログインユーザー名の表示
  - 相手のオンライン状態表示
  - マイクON/OFFトグルボタン
  - 通話状態インジケーター

## 4. 技術要件

### 4.1 SkyWay設定
- APIキーは環境変数で管理
- SkyWayのリファレンス（https://skyway.ntt.com/ja/docs/api-reference/）に準拠
- P2P接続の確立と管理
- 音声ストリームの制御

### 4.2 セキュリティ要件
- 環境変数による機密情報の管理
- クライアントサイドでの適切なエラーハンドリング
- WebRTC接続のセキュリティ確保

## 5. 将来的な拡張性
- データベース統合の考慮
  - ユーザー管理システム
  - 通話履歴管理
  - 設定情報の永続化

## 6. 考慮すべき追加項目
- ブラウザ互換性の確認
- マイクデバイスのアクセス権限管理
- 通話品質のモニタリング
- 接続切断時の自動再接続機能
- 適切なエラーメッセージの多言語対応
- レスポンシブデザインの実装
- 通話音量の調整機能
- ネットワーク状態の表示
